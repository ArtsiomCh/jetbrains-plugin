<idea-plugin>
    <id>ai.deepcode.jetbrains-plugin</id>
    <name>DeepCode</name>
    <vendor email="hello@deepcode.ai" url="www.deepcode.ai">DeepCode</vendor>

    <description><![CDATA[
    The IntelliJ IDEs extension provided by DeepCode.ai finds bugs and critical vulnerabilities in your code.
    We support Java, Python, JavaScript, TypeScript and HTML.<br>
    ]]></description>

    <!-- please see http://www.jetbrains.org/intellij/sdk/docs/basics/getting_started/plugin_compatibility.html
         on how to target different products -->
    <depends>com.intellij.modules.platform</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- Add your extensions here -->
        <annotator language="JAVA" implementationClass="ai.deepcode.jbplugin.annotators.DeepCodeAnnotator"/>
        <postStartupActivity implementation="ai.deepcode.jbplugin.DeepCodeStartupActivity"/>
        <toolWindow id="DeepCode(console)" anchor="bottom" factoryClass="ai.deepcode.jbplugin.DeepCodeToolWindowFactory"/>

        <toolWindow id="DeepCode" anchor="bottom" factoryClass="ai.deepcode.jbplugin.DeepCodeTestToolWindowFactory"
                    canCloseContents="true"/>
        <projectService serviceImplementation="ai.deepcode.jbplugin.ui.myTodoView"/>
        <projectService serviceImplementation="ai.deepcode.jbplugin.ui.nodes.TodoTreeHelper"/>

        <!--        For Idea CE and those that doesn't include corresponding plugin-->
        <externalAnnotator language="TEXT"
                           implementationClass="ai.deepcode.jbplugin.annotators.DeepCodeExternalAnnotator"/>
        <externalAnnotator language=""
                           implementationClass="ai.deepcode.jbplugin.annotators.DeepCodeExternalAnnotator"/>

        <externalAnnotator language="JAVA"
                           implementationClass="ai.deepcode.jbplugin.annotators.DeepCodeExternalAnnotator"/>
        <externalAnnotator language="JavaScript"
                           implementationClass="ai.deepcode.jbplugin.annotators.DeepCodeExternalAnnotator"/>
        <externalAnnotator language="HTML"
                           implementationClass="ai.deepcode.jbplugin.annotators.DeepCodeExternalAnnotator"/>
        <externalAnnotator language="Python"
                           implementationClass="ai.deepcode.jbplugin.annotators.DeepCodeExternalAnnotator"/>
    </extensions>

    <actions>
        <!-- Add your actions here -->
        <group id="ai.deepcode.jbplugin.DeepCodeGroup" text="DeepCode.ai" popup="true">
            <action id="ai.deepcode.jbplugin.ToolsMenu.AnalyseCurrentFileAction" class="ai.deepcode.jbplugin.actions.AnalyseCurrentFileAction"
                    text="Analyse Current File" description="Analyse current file with DeepCode.ai">
                <keyboard-shortcut keymap="$default" first-keystroke="shift alt T"/>
            </action>
            <action id="ai.deepcode.jbplugin.ToolsMenu.AnalyseProjectAction" class="ai.deepcode.jbplugin.actions.AnalyseProjectAction"
                    text="Analyse All Project Files" description="Analyse all files in the Project with DeepCode.ai"
                    icon="AllIcons.Actions.Show">
                <keyboard-shortcut keymap="$default" first-keystroke="shift alt Y"/>
            </action>
            <action id="ai.deepcode.jbplugin.ToolsMenu.InvalidateCachesAndAnalyseProjectAction" class="ai.deepcode.jbplugin.actions.InvalidateCachesAndAnalyseProjectAction"
                    text="Re-Analyse All Project Files" description="Invalidate caches and Analyse all files in the Project with DeepCode.ai"
                    icon="AllIcons.Actions.Refresh">
            </action>

            <add-to-group group-id="ToolsMenu" anchor="last"/>
        </group>

        <!-- see TodoMainGroup and TodoViewGroupByGroup -->
        <group id="DeepCodeMainGroup">
            <add-to-group group-id="Other.KeymapGroup"/>
            <group id="DeepCodeViewGroupByGroup" class="ai.deepcode.jbplugin.ui.TodoPanel$GroupByActionGroup" popup="true">
                <separator text="Group By"/>
                <action class="ai.deepcode.jbplugin.ui.TodoPanel$MyShowModulesAction" id="DeepCodeViewGroupByShowModules"/>
                <action class="ai.deepcode.jbplugin.ui.TodoPanel$MyShowPackagesAction" id="DeepCodeViewGroupByShowPackages"/>
                <action class="ai.deepcode.jbplugin.ui.TodoPanel$MyFlattenPackagesAction" id="DeepCodeViewGroupByFlattenPackage"/>
            </group>
        </group>

        <action id="ai.deepcode.jbplugin.EditorPopupMenu.AnalyseCurrentFileAction" class="ai.deepcode.jbplugin.actions.AnalyseCurrentFileAction"
                text="DeepCode Analyse Current File" description="Analyse current file with DeepCode.ai">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
            <keyboard-shortcut keymap="$default" first-keystroke="shift alt T"/>
        </action>
    </actions>
</idea-plugin>